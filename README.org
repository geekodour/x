#+title: x

* Whole tree ðŸŒ´
#+begin_src fish :dir ~/ :results output verbatim :exports both
tree -L 2 -I Desktop/ -I Downloads/ -I Books/ -I Zotero/ -I dump/ -I Documents/ -I Pictures
#+end_src

#+RESULTS:
#+begin_example
.
â”œâ”€â”€ bw
â”œâ”€â”€ faafo
â”‚Â Â  â”œâ”€â”€ experiments
â”‚Â Â  â””â”€â”€ gig23
â”œâ”€â”€ infra
â”‚Â Â  â””â”€â”€ workshop
â”œâ”€â”€ locus
â”‚Â Â  â”œâ”€â”€ anki
â”‚Â Â  â”œâ”€â”€ blog
â”‚Â Â  â”œâ”€â”€ diary
â”‚Â Â  â”œâ”€â”€ mogoz
â”‚Â Â  â”œâ”€â”€ o
â”‚Â Â  â”œâ”€â”€ scrap
â”‚Â Â  â””â”€â”€ todayi
â”œâ”€â”€ notes
â”‚Â Â  â”œâ”€â”€ nikitaexplanation.org
â”‚Â Â  â””â”€â”€ org
â”œâ”€â”€ projects
â”‚Â Â  â”œâ”€â”€ gigs
â”‚Â Â  â”œâ”€â”€ oss
â”‚Â Â  â””â”€â”€ work
â”œâ”€â”€ README.org
â””â”€â”€ wallpaper.jpg

20 directories, 4 files
#+end_example

** Export locus
#+begin_src fish :dir ~/ :results output verbatim :tangle ~/.config/fish/functions/export_locus.fish
function export_locus --description 'export most of locus'
  pushd ~/locus
  set -l repos_to_export blog diary mogoz o scrap todayi
  for r in $repos_to_export;
      pushd $r
      echo "exporting repos ~/locus/$r"
      make export
      echo "done exporting repos ~/locus/$r"
      popd
  end
  popd
end
#+end_src

** Push things
#+begin_src fish :dir ~/ :results output verbatim :tangle ~/.config/fish/functions/push_everything.fish
function push_everything --description 'push personal repos to gh'
  pushd ~
  set -l trees locus infra faafo
  for t in $trees;
      echo "pushing repos under ~/$t"
      pushd $t
      set -l dirs $(ls)
      for i in $dirs;
          echo "pushing ~/$t/$i"
          pushd $i
          git add -A
          git commit -m "automated commit, god bless"
          git push origin main
          popd
          printf "done pushing ~/$t/$i\n\n"
      end
      popd
  end
  popd
end
#+end_src

** Workspace
#+begin_src org-mode :tangle ~/.emacs.d/.local/cache/treemacs-persist
,* Perspective wick
,** o
 - path :: ~/locus/o
,** blog
 - path :: ~/locus/blog
,** notes
 - path :: ~/notes
,** anki
 - path :: ~/locus/anki
,** .config
 - path :: ~/.config
#+end_src
